"use strict";(function(){function t(e){return"https://graph.facebook.com/"+e}function n(e,t){return e+"&access_token="+t}function r(t,n){return t.indexOf(e.makeAccountLink(n))===0}function i(e){var t=e.link.length-1;return e.message.indexOf(e.link[t]==="/"?e.link.substring(0,t):e.link)>=0}function s(e){return new Date(e.replace(/\+0000/g,"Z"))}function o(e,t){var n=[];if(t){var r;for(var i=0;i<t.length;++i){r=t[i];if(r.message){r.created=s(r.created_time);n.push(r)}}}return n}function u(e,t,n){return e.created.getTime()+n>t.getTime()}function a(e,t){return e.toDateString()===t.toDateString()}function f(e,t){if(e.link&&(r(e.link,t)||i(e))){e.link=""}return e}var e=this.FbUtils={};e.postsUrl=function(e,r){return n(t(e)+"/posts?fields=message,link",r)};e.collectYoungPosts=function(e,t,n,r){var i=[];var s=o(e,t);if(s.length>0&&u(s[0],n,r)){i.push(f(s[0],e));for(var l=1;l<s.length;++l){if(a(n,s[l].created)){i.push(f(s[l],e))}else{break}}}return i};e.getTransformedFeedsWithPosts=function(e,t){var n=[],r,i;for(var s=0;s<e.length;++s){i=e[s];r=t[s];if(r&&r.length>0){i.time=r[0].created;i.posts=r;n.push(i)}}return n};e.makeAccountLink=function(e){return"https://www.facebook.com/"+e};e.deserializeFeeds=function(e,t){if(e){var n,r,i;for(var o,u=0;u<e.length;++u){n=e[u];i=n.posts;n.time=s(i[0].created_time);for(o=0;o<i.length;++o){r=i[o];r.created=s(r.created_time)}if(t){t(n)}}return e}return[]}}).call(this)